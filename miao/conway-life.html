<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .canvas {
            width: 400px;
            height: 400px;
        }
    </style>

</head>

<body>
    <div>
        <section class="canvas">
            <!-- 画布为16x16的二维数组 -->
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
            <input type="checkbox" class="cell">
        </section>

        <section class="controller">
            <button class="next">Next</button>
            <button class="start">Start and Pause</button>
        </section>
    </div>


    <script>
        //初始化，将细胞放进二维数组画布中
        function initialCanvas() {
            let temp = Array.from(document.getElementsByClassName('cell'))
            let cells = new Array(16).fill(0)
            let j = 0
            let l = 0
            for (let i = 0; i < 16; i++) {
                let k = 0
                let cellRow = new Array(16).fill(0)
                for (; j < (i + 1) * 16; j++) {
                    cellRow[k++] = temp[j]
                }
                cells[l++] = cellRow
            }
            return cells
        }
        let cells = initialCanvas()

        //根据当前细胞的状况来更新画布
        function updateCanvas() {
            for (let i = 0; i < 16; i++) {
                for (let j = 0; j < 16; j++) {
                    let aliveNeighbor = countAliveNeighbor(i, j)
                    if (aliveNeighbor == 3) {
                        cells[i][j].checked = true
                    }
                    else if (aliveNeighbor == 2) {
                        continue
                    }
                    else {
                        cells[i][j].checked = false
                    }
                }
            }
        }

        //计数传入的细胞坐标的邻居细胞存活数量个数
        function countAliveNeighbor(i, j) {
            let aliveNeighbor = 0
            //上下左右邻居以及西北、东北、西南、东南邻居的坐标
            let left = [i, ((j == 0) ? 15 : j - 1)]
            let right = [i, (j == 15) ? 0 : j + 1]
            let top = [(i == 0) ? 15 : i - 1, j]
            let bottom = [(i == 15) ? 0 : i + 1, j]
            let leftTop = [top[0], left[1]]
            let rightTop = [top[0], right[1]]
            let leftBottom = [bottom[0], left[1]]
            let rightBottom = [bottom[0], right[1]]

            if (cells[[left[0]]][[left[1]]].checked) {
                aliveNeighbor++
            }
            if (cells[right[0]][right[1]].checked) {
                aliveNeighbor++
            }
            if (cells[top[0]][top[1]].checked) {
                aliveNeighbor++
            }
            if (cells[bottom[0]][bottom[1]].checked) {
                aliveNeighbor++
            }
            if (cells[leftTop[0]][leftTop[1]].checked) {
                aliveNeighbor++
            }
            if (cells[rightTop[0]][rightTop[1]].checked) {
                aliveNeighbor++
            }
            if (cells[leftBottom[0]][leftBottom[1]].checked) {
                aliveNeighbor++
            }
            if (cells[rightBottom[0]][rightBottom[1]].checked) {
                aliveNeighbor++
            }
            return aliveNeighbor
        }


        let next = document.getElementsByClassName('next')[0]
        let start = document.getElementsByClassName('start')[0]

        next.addEventListener('click', updateCanvas)


        var id
        var i = 0
        start.addEventListener('click', function (e) {
            i++
            if (i & 1) {
                id = setInterval(() => {
                    next.click()
                }, 100)
            }
            else {
                clearTimeout(id)
            }
        })



    </script>

</body>

</html>